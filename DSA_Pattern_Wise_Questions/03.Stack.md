# Stack Patterns

**Stack** follows **Last In, First Out (LIFO)** — like a stack of plates: you add (push) on top, remove (pop) from top.

It's super useful for problems involving:
- **Nested** things (parentheses, expressions)
- **Reversing** order
- **Nearest greater/smaller** elements
- **Simulations** (undo, history, collisions)

There are **three main patterns** in interviews:

1. **Monotonic Stack** (keeps elements in sorted order — increasing or decreasing)
2. **Parentheses & Expression Stack** (handles nesting, validation, evaluation)
3. **Stack for Reversal & Simulation** (reverses things or simulates step-by-step processes)

Let's break them down one by one — with easy analogies and when to spot them!

---

## Pattern 1: Monotonic Stack

**What happens?**  
We keep the stack in **strictly increasing** or **decreasing** order (monotonic = always going one way).  
When we add a new element, we pop elements that "break" the order.  
This helps find — for each element — the **nearest greater/smaller** on left/right quickly.

**Super simple example**  
Daily Temperatures: For each day, how many days until a warmer day?  
Use decreasing stack of temperatures (with indices).  
When a warmer day comes → pop previous colder days and calculate difference.

**When should you think of this pattern?** (Beginner checklist)

- "Next greater element", "previous smaller", "nearest larger/smaller"
- Histogram / area / rectangle / width / ramp problems
- Sum of subarray mins/maxes/ranges
- Collisions (asteroids, robots)
- Remove k digits to make smallest/largest number
- Words like "nearest", "first greater/smaller to the right/left"

**Real-life analogy**  
People standing in line by height. New tall person arrives → shorter people in front "leave" (pop) until a taller one blocks.

### LeetCode Problems – Monotonic Stack (20 Problems)

| No. | Problem Name                                      | LeetCode Link                                                                 | Difficulty | Quick Tip for Beginners                              |
|-----|---------------------------------------------------|-------------------------------------------------------------------------------|------------|------------------------------------------------------|
| 1   | Next Greater Element I                            | https://leetcode.com/problems/next-greater-element-i/                         | Easy       | Use map + monotonic decreasing stack                 |
| 2   | Daily Temperatures                                | https://leetcode.com/problems/daily-temperatures/                             | Medium     | Decreasing stack of indices                          |
| 3   | Largest Rectangle in Histogram                    | https://leetcode.com/problems/largest-rectangle-in-histogram/                 | Hard       | Next & previous smaller for each bar                 |
| 4   | Trapping Rain Water                               | https://leetcode.com/problems/trapping-rain-water/                            | Hard       | Can use monotonic (or two pointers alt)              |
| 5   | Sum of Subarray Minimums                          | https://leetcode.com/problems/sum-of-subarray-minimums/                       | Medium     | Previous & next smaller for each element             |
| 6   | Online Stock Span                                 | https://leetcode.com/problems/online-stock-span/                              | Medium     | Previous greater or equal                            |
| 7   | Asteroid Collision                                | https://leetcode.com/problems/asteroid-collision/                             | Medium     | Decreasing stack — simulate collisions               |
| 8   | Remove K Digits                                   | https://leetcode.com/problems/remove-k-digits/                                | Medium     | Monotonic increasing — remove larger digits          |
| 9   | Next Greater Element II                           | https://leetcode.com/problems/next-greater-element-ii/                        | Medium     | Circular → traverse twice                            |
| 10  | Final Prices With a Special Discount in a Shop    | https://leetcode.com/problems/final-prices-with-a-special-discount-in-a-shop/ | Easy       | Next smaller or equal                                |
| 11  | Maximum Width Ramp                                | https://leetcode.com/problems/maximum-width-ramp/                             | Medium     | Monotonic increasing indices                         |
| 12  | 132 Pattern                                       | https://leetcode.com/problems/132-pattern/                                    | Medium     | Decreasing stack for '3' & '2'                       |
| 13  | Smallest Subsequence of Distinct Characters       | https://leetcode.com/problems/smallest-subsequence-of-distinct-characters/    | Medium     | Monotonic + greedy (same as 316)                     |
| 14  | Remove Duplicate Letters                          | https://leetcode.com/problems/remove-duplicate-letters/                       | Medium     | Monotonic increasing + last occurrence map           |
| 15  | Sum of Subarray Ranges                            | https://leetcode.com/problems/sum-of-subarray-ranges/                         | Medium     | Sum(max - min) = sum max - sum min                   |
| 16  | Number of Visible People in a Queue               | https://leetcode.com/problems/number-of-visible-people-in-a-queue/            | Medium     | Decreasing monotonic stack                           |
| 17  | Beautiful Towers I                                | https://leetcode.com/problems/beautiful-towers-i/                             | Medium     | Monotonic for peak mountain shape                    |
| 18  | Maximum Subarray Min-Product                      | https://leetcode.com/problems/maximum-subarray-min-product/                   | Medium     | Next & previous smaller for min                      |
| 19  | Find the Most Competitive Subsequence             | https://leetcode.com/problems/find-the-most-competitive-subsequence/          | Medium     | Monotonic increasing + k limit                       |
| 20  | Next Greater Element III                          | https://leetcode.com/problems/next-greater-element-iii/                       | Medium     | Next permutation style (not pure monotonic)          |

---

## Pattern 2: Parentheses & Expression Stack

**What happens?**  
Push opening brackets/operators/numbers.  
When closing comes → pop and match/calculate.

**Super simple example**  
Valid Parentheses: "(" → push, ")" → pop & check match.

**When should you think of this pattern?** (Beginner checklist)

- Brackets: (), {}, [], <>, etc.
- "Valid", "balanced", "matching"
- Decode string like "3[a]2[bc]"
- Calculator / expression evaluation (infix/postfix)
- Remove invalid parentheses / make valid
- Score / simplify / parse nested things

**Real-life analogy**  
Russian nesting dolls: open doll (push), put inside (nest), close (pop & match).

### LeetCode Problems – Parentheses & Expression Stack (20 Problems)

| No. | Problem Name                                      | LeetCode Link                                                                 | Difficulty | Quick Tip for Beginners                              |
|-----|---------------------------------------------------|-------------------------------------------------------------------------------|------------|------------------------------------------------------|
| 1   | Valid Parentheses                                 | https://leetcode.com/problems/valid-parentheses/                              | Easy       | Classic map for matching pairs                       |
| 2   | Longest Valid Parentheses                         | https://leetcode.com/problems/longest-valid-parentheses/                      | Hard       | Stack with indices or DP                             |
| 3   | Decode String                                     | https://leetcode.com/problems/decode-string/                                  | Medium     | Push count & string when '['                         |
| 4   | Basic Calculator                                  | https://leetcode.com/problems/basic-calculator/                               | Hard       | Handle signs & parentheses                           |
| 5   | Evaluate Reverse Polish Notation                  | https://leetcode.com/problems/evaluate-reverse-polish-notation/               | Medium     | Postfix → push nums, pop for ops                     |
| 6   | Simplify Path                                     | https://leetcode.com/problems/simplify-path/                                  | Medium     | Split & push dirs, pop on ".."                       |
| 7   | Remove Outermost Parentheses                      | https://leetcode.com/problems/remove-outermost-parentheses/                   | Medium     | Track balance → add when inner                       |
| 8   | Score of Parentheses                              | https://leetcode.com/problems/score-of-parentheses/                           | Medium     | Balance * 2 or add 1                                 |
| 9   | Minimum Remove to Make Valid Parentheses          | https://leetcode.com/problems/minimum-remove-to-make-valid-parentheses/       | Medium     | Stack indices of invalid                             |
| 10  | Make The String Great                             | https://leetcode.com/problems/make-the-string-great/                          | Easy       | Pop if adjacent differ by case                       |
| 11  | Parsing Boolean Expression                        | https://leetcode.com/problems/parsing-a-boolean-expression/                   | Hard       | Nested & / | ! ops                                        |
| 12  | Mini Parser                                       | https://leetcode.com/problems/mini-parser/                                    | Hard       | Parse nested lists                                   |
| 13  | Verify Preorder Serialization of a Binary Tree    | https://leetcode.com/problems/verify-preorder-serialization-of-a-binary-tree/ | Medium     | Count slots                                          |
| 14  | Remove All Adjacent Duplicates in String          | https://leetcode.com/problems/remove-all-adjacent-duplicates-in-string/       | Easy       | Pop if top == current                                |
| 15  | Remove All Adjacent Duplicates in String II       | https://leetcode.com/problems/remove-all-adjacent-duplicates-in-string-ii/    | Medium     | Push with count                                      |
| 16  | Brace Expansion                                   | https://leetcode.com/problems/brace-expansion/                                | Medium     | DFS or stack for {}                                  |
| 17  | Check If Word Is Valid After Substitutions        | https://leetcode.com/problems/check-if-word-is-valid-after-substitutions/     | Easy       | "abcd" pattern                                       |
| 18  | Crawler Log Folder                                | https://leetcode.com/problems/crawler-log-folder/                             | Easy       | Push dirs, pop on "../"                              |
| 19  | Basic Calculator II                               | https://leetcode.com/problems/basic-calculator-ii/                            | Medium     | Handle * / first                                     |
| 20  | Basic Calculator (repeated)                       | https://leetcode.com/problems/basic-calculator/                               | Hard       | (same as 4)                                          |

---

## Pattern 3: Stack for Reversal & Simulation

**What happens?**  
Use stack to reverse order or simulate operations step-by-step (undo, history, build, collisions).

**Super simple example**  
Reverse String: push all chars → pop to build reversed.

**When should you think of this pattern?** (Beginner checklist)

- Reverse string / words
- Implement queue/stack using each other
- Backspace / remove stars / simplify
- Browser history / undo
- Simulate process: baseball, build array, collisions
- "Design" problems with stack ops

**Real-life analogy**  
Browser back button: stack of pages — go back = pop.

### LeetCode Problems – Reversal & Simulation (20 Problems)

| No. | Problem Name                                      | LeetCode Link                                                                 | Difficulty | Quick Tip for Beginners                              |
|-----|---------------------------------------------------|-------------------------------------------------------------------------------|------------|------------------------------------------------------|
| 1   | Reverse String                                    | https://leetcode.com/problems/reverse-string/                                 | Easy       | Two pointers better, but stack works                 |
| 2   | Implement Queue using Stacks                      | https://leetcode.com/problems/implement-queue-using-stacks/                   | Easy       | Two stacks: one for push, one for pop                |
| 3   | Implement Stack using Queues                      | https://leetcode.com/problems/implement-stack-using-queues/                   | Easy       | Rotate queue for pop/top                             |
| 4   | Backspace String Compare                          | https://leetcode.com/problems/backspace-string-compare/                       | Easy       | Build cleaned string or two pointers                 |
| 5   | Design Browser History                            | https://leetcode.com/problems/design-browser-history/                         | Medium     | Two stacks: back & forward                           |
| 6   | Validate Stack Sequences                          | https://leetcode.com/problems/validate-stack-sequences/                       | Medium     | Simulate push/pop                                    |
| 7   | Build Array With Stack Operations                 | https://leetcode.com/problems/build-an-array-with-stack-operations/           | Medium     | Push & pop simulation                                |
| 8   | Baseball Game                                     | https://leetcode.com/problems/baseball-game/                                  | Easy       | Stack for scores + ops                               |
| 9   | Removing Stars From a String                      | https://leetcode.com/problems/removing-stars-from-a-string/                   | Medium     | Pop on '*'                                           |
| 10  | Exclusive Time of Functions                       | https://leetcode.com/problems/exclusive-time-of-functions/                    | Medium     | Stack for start times                                |
| 11  | Design a Stack With Increment Operation           | https://leetcode.com/problems/design-a-stack-with-increment-operation/        | Medium     | Array + lazy increment                               |
| 12  | Reveal Cards In Increasing Order                  | https://leetcode.com/problems/reveal-cards-in-increasing-order/               | Medium     | Simulate dequeue process                             |
| 13  | Robot Collisions                                  | https://leetcode.com/problems/robot-collisions/                               | Medium     | Similar to asteroids                                 |
| 14  | Final Prices With a Special Discount (repeat)     | https://leetcode.com/problems/final-prices-with-a-special-discount-in-a-shop/ | Easy       | (monotonic)                                          |
| 15  | Asteroid Collision (repeat)                       | https://leetcode.com/problems/asteroid-collision/                             | Medium     | (monotonic)                                          |
| 16  | Remove Duplicate Letters (repeat)                 | https://leetcode.com/problems/remove-duplicate-letters/                       | Medium     | (monotonic)                                          |
| 17  | Simplify Path (repeat)                            | https://leetcode.com/problems/simplify-path/                                  | Medium     | (parentheses)                                        |
| 18  | Design Text Editor                                | https://leetcode.com/problems/design-text-editor/                             | Medium     | Two stacks: left & right of cursor                   |
| 19  | Remove Stones to Minimize the Total               | https://leetcode.com/problems/remove-stones-to-minimize-the-total/            | Medium     | Priority queue (max heap) — not pure stack           |
| 20  | Reverse Words in a String                         | https://leetcode.com/problems/reverse-words-in-a-string/                      | Medium     | Split & reverse or stack                             |

**Tips for Beginners 
- Stack is simple: push, pop, top, empty — master these 4 ops.
- For monotonic: always decide increasing or decreasing based on "greater" or "smaller".
- Draw small examples (5–8 elements) and simulate push/pop on paper.
- Practice 5 easy + 5 medium per pattern first.
- Many problems mix patterns — e.g., monotonic + stack simulation.
- Time complexity: usually O(n) since each element pushed/popped at most once.
