## Batch Processing

> **Batch Processing** = Ek saath multiple SQL queries execute karna instead of one by one

### Why Use Batch Processing?
- **Performance boost** - Single round trip to database for multiple queries
- **Less network overhead** - Reduces database connections
- **Efficient for bulk operations** - Insert/Update many records at once

### Key Methods

| Method | Description |
|--------|-------------|
| `addBatch(query)` | Add SQL query to batch |
| `executeBatch()` | Execute all queries in batch |
| Returns `int[]` | Array with affected rows for each query |

---

### 1. Batch Processing with Statement

```java
import java.sql.*;
import java.util.Scanner;

public class BatchWithStatement {
    private static final String url = "jdbc:mysql://localhost:3306/college";
    private static final String username = "root";
    private static final String password = "12345";
    
    public static void main(String[] args) {
        try {
            Connection connection = DriverManager.getConnection(url, username, password);
            Statement statement = connection.createStatement();
            Scanner scanner = new Scanner(System.in);
            
            while(true) {
                System.out.print("Enter name: ");
                String name = scanner.next();
                System.out.print("Enter age: ");
                int age = scanner.nextInt();
                System.out.print("Enter marks: ");
                double marks = scanner.nextDouble();
                
                // Create query and add to batch
                String query = String.format(
                    "INSERT INTO students(name, age, marks) VALUES('%s', %d, %f)", 
                    name, age, marks
                );
                statement.addBatch(query);
                
                System.out.print("Enter more data(Y/N): ");
                String choice = scanner.next();
                if(choice.toUpperCase().equals("N")) {
                    break;
                }
            }
            
            // Execute all queries at once
            int rowsAffected = statement.executeBatch().length;
            
            if(rowsAffected > 0) {
                System.out.println("Data Updated Successfully!");
            } else {
                System.out.println("Data not Updated!");
            }
            
        } catch (SQLException e) {
            System.out.println(e.getMessage());
        }
    }
}
```

---

### 2. Batch Processing with PreparedStatement (Recommended)

```java
import java.sql.*;
import java.util.Scanner;

public class BatchWithPreparedStatement {
    private static final String url = "jdbc:mysql://localhost:3306/college";
    private static final String username = "root";
    private static final String password = "12345";
    
    public static void main(String[] args) {
        try {
            Connection connection = DriverManager.getConnection(url, username, password);
            String query = "INSERT INTO students(name, age, marks) VALUES(?, ?, ?)";
            PreparedStatement preparedStatement = connection.prepareStatement(query);
            Scanner scanner = new Scanner(System.in);
            
            while(true) {
                System.out.print("Enter name: ");
                String name = scanner.next();
                System.out.print("Enter age: ");
                int age = scanner.nextInt();
                System.out.print("Enter marks: ");
                double marks = scanner.nextDouble();
                
                // Set parameters
                preparedStatement.setString(1, name);
                preparedStatement.setInt(2, age);
                preparedStatement.setDouble(3, marks);
                
                // Add to batch
                preparedStatement.addBatch();
                
                System.out.print("Enter more data(Y/N): ");
                String choice = scanner.next();
                if(choice.toUpperCase().equals("N")) {
                    break;
                }
            }
            
            // Execute batch and get result array
            int[] arr = preparedStatement.executeBatch();
            
            // Check which queries executed successfully
            for(int i = 0; i < arr.length; i++) {
                if(arr[i] == 0) {
                    System.out.println("Query: " + i + " not executed Successfully!!");
                }
            }
            
        } catch (SQLException e) {
            System.out.println(e.getMessage());
        }
    }
}
```

**Key Difference**:
- `Statement.addBatch(query)` - Pass query as parameter
- `PreparedStatement.addBatch()` - No parameter needed (query already set)

---
