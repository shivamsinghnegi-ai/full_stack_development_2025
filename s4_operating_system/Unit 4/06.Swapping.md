## Swapping

### What is Swapping?

**Definition:** Process of temporarily moving a process from main memory to backing store (disk) and bringing it back later.

```
Main Memory        Backing Store (Disk)
|  Process A  | ←→ |  Process C  |
|  Process B  |    |  Process D  |
|  Free       |    |  Process E  |
```

### Why Swapping?

- **Reason:** To free up memory for other processes
- **Goal:** Increase degree of multiprogramming
- Allows more processes than physical memory can hold

### Swapping Process

#### Swap Out
- Moving process from memory to disk
- Saves complete process image

#### Swap In
- Bringing process from disk to memory
- May not load at same memory location

### Components of Swap Time

```
Swap Time = Transfer Time + Latency Time

Transfer Time = Amount of memory / Transfer rate
```

### Example Problem

**Given:**
- User process = 10 MB
- Transfer rate = 50 MB/sec
- Average latency = 8 ms

**Find:** Swap time

**Solution:**
```
Transfer time = 10 MB / 50 MB/sec = 0.2 sec = 200 ms
Latency = 8 ms

Total swap time = 200 + 8 = 208 ms

For swap out + swap in = 208 × 2 = 416 ms
```

### Context Switch with Swapping

**Time Components:**
1. Save process state
2. Swap out process
3. Swap in new process
4. Restore process state

**Total time can be significant!**

### Backing Store

- **Fast disk** large enough to hold copies of all memory images
- Must provide **direct access** to memory images
- Portion of disk used for swapping

### Types of Swapping

#### 1. **Standard Swapping**
- Entire process swapped
- Used in older systems

#### 2. **Modified Swapping (Modern)**
- Only parts of process swapped
- Pages swapped instead of entire process
- Used in modern virtual memory systems

### Constraints on Swapping

**Cannot swap out a process if:**
1. Process is waiting for I/O operation
2. I/O operation is in progress
3. Process holds locks

**Solution:** 
- Use I/O buffers in OS space only
- Or wait until I/O completes

### Advantages of Swapping

✓ Higher degree of multiprogramming
✓ Better memory utilization
✓ Allows processes larger than physical memory
✓ Can run more processes simultaneously

### Disadvantages of Swapping

✗ High overhead (disk I/O is slow)
✗ Increases context switch time
✗ Performance degradation
✗ Disk transfer time depends on amount of memory

---

