# Decimal Arithmetic Operations

### Why Decimal Arithmetic?

**Problem with Binary:**
- Binary is great for computers but causes problems with decimal fractions
- Example: $0.1_{10}$ cannot be exactly represented in binary!
- This causes errors in financial calculations (banks, shopping, etc.)

**Solution:** Use **BCD (Binary Coded Decimal)** - represent each decimal digit separately in binary!

---

## BCD (Binary Coded Decimal) - The Basics

### What is BCD?

**Simple Idea:** Instead of converting the whole number to binary, convert **each decimal digit** to 4-bit binary **separately**.

```
Decimal:    4    7    2
            ↓    ↓    ↓
BCD:      0100  0111  0010
```

**Rule:** Each digit (0-9) uses exactly **4 bits**

---

### BCD Encoding Table (Memorize This!)

| Decimal | BCD | Decimal | BCD |
|:---:|:---:|:---:|:---:|
| **0** | 0000 | **5** | 0101 |
| **1** | 0001 | **6** | 0110 |
| **2** | 0010 | **7** | 0111 |
| **3** | 0011 | **8** | 1000 |
| **4** | 0100 | **9** | 1001 |

> **Invalid BCD Codes:** 1010, 1011, 1100, 1101, 1110, 1111 (10-15 don't exist in decimal!)

---

### Conversion Examples

**Decimal to BCD:**
```
59₁₀ → 5 = 0101, 9 = 1001 → 0101 1001 (BCD)
128₁₀ → 1 = 0001, 2 = 0010, 8 = 1000 → 0001 0010 1000 (BCD)
```

**BCD to Decimal:**
```
0011 0111 (BCD) → 0011 = 3, 0111 = 7 → 37₁₀
1001 0000 0101 (BCD) → 9, 0, 5 → 905₁₀
```

---

### Packed vs Unpacked BCD

| Type | Digits per Byte | Example: 59 | Use Case |
|:---|:---:|:---|:---|
| **Packed BCD** | 2 | `0101 1001` (1 byte) | Storage efficient |
| **Unpacked BCD** | 1 | `0000 0101` `0000 1001` (2 bytes) | Easier processing |

---

## BCD Addition

### The Golden Rule

> **After adding two BCD digits:**
> - If result > 9 (i.e., 1010 to 1111) → **Add 6 (0110)**
> - If there's a carry out → **Add 6 (0110)**

### Why Add 6?

```
Binary 4 bits can represent: 0 to 15 (16 values)
BCD only uses:              0 to 9  (10 values)
Unused codes:               10 to 15 (6 values)
                            ↓
                    We skip these 6 by adding 6!
```

---

### BCD Addition Procedure

**Step 1:** Convert each decimal number to BCD

**Step 2:** Add the BCD numbers using normal binary addition

**Step 3:** Check each 4-bit group (nibble):
- If nibble > 9 (1010-1111) → Add 0110
- If carry from nibble → Add 0110 to that nibble

**Step 4:** Write the corrected result

---

### Example 1: Simple Addition (No Correction Needed)

**Problem:** $25 + 33 = ?$ in BCD

**Step 1: Convert to BCD**
```
25 → 0010 0101
33 → 0011 0011
```

**Step 2: Add**
```
    0010 0101   (25)
  + 0011 0011   (33)
  ───────────
    0101 1000
```

**Step 3: Check nibbles**
- Units: 0101 + 0011 = 1000 (8) ✓ Valid (≤ 9)
- Tens: 0010 + 0011 = 0101 (5) ✓ Valid (≤ 9)

**No correction needed!**

**Result:** `0101 1000` = **58** ✓

---

### Example 2: Addition WITH Correction

**Problem:** $47 + 35 = ?$ in BCD

**Step 1: Convert to BCD**
```
47 → 0100 0111
35 → 0011 0101
```

    0100 0111   (47)
  + 0011 0101   (35)
  ───────────
    0111 1100   ← Units = 1100 (12) > 9 incorrect
```

**Step 3: Correction needed!**
    1100
  + 0110
  ──────
   10010  → Keep 0010, Carry 1 to tens

Tens nibble = 0111 + carry(1) = 1000 (8) ✓ Valid
```

**Step 4: Final Result**
```
    0100 0111   (47)
  + 0011 0101   (35)
  ───────────
    0111 1100   (intermediate)
  +      0110   (add 6 to units)
  ───────────
    1000 0010   = 82
```

**Result:** `1000 0010` = **82** ✓

---

### Example 3: Multiple Corrections

**Problem:** $98 + 87 = ?$ in BCD

**Step 1: Convert to BCD**
```
98 → 1001 1000
87 → 1000 0111
```

**Step 2: Add**
```
    1001 1000   (98)
  + 1000 0111   (87)
  ───────────
   10001 1111   ← Both nibbles invalid!
```

**Step 3: Correct BOTH nibbles**

**Units:** 1000 + 0111 = 1111 (15) > 9
```
    1111 + 0110 = 10101 → 0101 with carry
```

**Tens:** 1001 + 1000 + 1(carry) = 10010 (18) > 9
```
    0010 + 0110 = 1000, plus carry out = 1
```

**Step 4: Final Result**
```
Result = 1 | 1000 | 0101
       = 1    8      5
       = 185
```

**Result:** `0001 1000 0101` = **185** ✓

---

## BCD Subtraction

### Method: 10's Complement Subtraction

Just like 2's complement in binary, we use **10's complement** for BCD subtraction!

**10's Complement of a digit = 10 - digit**
Or: **9's Complement + 1**

| Digit | 9's Comp | 10's Comp |
|:---:|:---:|:---:|
| 0 | 9 | 10→0 |
| 1 | 8 | 9 |
| 2 | 7 | 8 |
| 3 | 6 | 7 |
| 4 | 5 | 6 |
| 5 | 4 | 5 |
| 6 | 3 | 4 |
| 7 | 2 | 3 |
| 8 | 1 | 2 |
| 9 | 0 | 1 |

---

### BCD Subtraction Procedure

**To calculate A - B:**

**Step 1:** Find 10's complement of B (for each digit: 9 - digit, then add 1 to result)

**Step 2:** Add A + (10's complement of B)

**Step 3:** If there's a carry out → Result is positive, discard carry

**Step 4:** If no carry out → Result is negative, take 10's complement of result

---

### Example 4: BCD Subtraction

**Problem:** $72 - 48 = ?$ in BCD

**Step 1: Find 10's complement of 48**
```
9's complement of 48: 9-4=5, 9-8=1 → 51
Add 1: 51 + 1 = 52
10's complement of 48 = 52
```

**Step 2: Add 72 + 52**
```
72 → 0111 0010
52 → 0101 0010

    0111 0010   (72)
  + 0101 0010   (52)
  ───────────
    1100 0100   ← Units OK, Tens = 1100 > 9!
```

**Step 3: Correct tens nibble**
```
    1100 + 0110 = 10010 → 0010 with carry
```

**Step 4: Result**
```
Carry out = 1 (discard it, result is positive)
Result = 0010 0100 = 24
```

**Result:** $72 - 48 =$ **24** ✓

---

### Example 5: BCD Subtraction (Another)

**Problem:** $93 - 26 = ?$ in BCD

**Step 1: Find 10's complement of 26**
```
9's complement: 9-2=7, 9-6=3 → 73
Add 1: 73 + 1 = 74
```

**Step 2: Add 93 + 74**
```
93 → 1001 0011
74 → 0111 0100

    1001 0011   (93)
  + 0111 0100   (74)
  ───────────
   10000 0111
      ↑
   Tens = 10000 > 9, needs correction!
```

**Step 3: Correct**
```
    0000 + 0110 = 0110
With carry from previous: 1 0110 0111
Discard outer carry → 0110 0111 = 67
```

**Result:** $93 - 26 =$ **67** ✓

---

### Example 6: BCD Subtraction with Negative Result (No Carry Out)

**Problem:** $34 - 57 = ?$ in BCD

Since 34 < 57, the result will be **negative**.

**Step 1: Find 10's complement of 57**
```
9's complement of 57: 9-5=4, 9-7=2 → 42
Add 1: 42 + 1 = 43
10's complement of 57 = 43
```

**Step 2: Add 34 + 43**
```
34 → 0011 0100
43 → 0100 0011

    0011 0100   (34)
  + 0100 0011   (43)
  ───────────
    0111 0111   = 77
```

**Step 3: Check for carry out**
```
NO carry out! → Result is NEGATIVE
```

**Step 4: Take 10's complement of result to get magnitude**
```
Result = 77
9's complement of 77: 9-7=2, 9-7=2 → 22
Add 1: 22 + 1 = 23
```

**Final Result:** Since no carry, answer is **negative**: $34 - 57 = $ **-23** ✓

**Verification:** $34 - 57 = -23$ ✓

---

## Quick Reference: BCD Arithmetic Rules

### Addition Rules

| Condition | Action |
|:---|:---|
| Sum ≤ 9 (0000-1001) | No correction |
| Sum > 9 (1010-1111) | Add 6 (0110) |
| Carry out from nibble | Add 6 (0110) |

### Subtraction Rules

| Step | Action |
|:---|:---|
| 1 | Find 10's complement of subtrahend |
| 2 | Add instead of subtract |
| 3 | Carry out? → Positive result |
| 4 | No carry? → Negative, take 10's complement |

---

## Why Use BCD? Advantages & Disadvantages

### Advantages

| Advantage | Explanation |
|:---|:---|
| **Exact Decimal** | No rounding errors for money! $0.10 is exactly $0.10 |
| **Easy Conversion** | Direct mapping between decimal and BCD |
| **Human Readable** | Each nibble = one decimal digit |
| **Financial Apps** | Banks, ATMs, calculators, billing systems |

### Disadvantages

| Disadvantage | Explanation |
|:---|:---|
| **Wastes Space** | Uses ~20% more bits than pure binary |
| **Slower** | Needs correction steps after arithmetic |
| **Complex Hardware** | Addition/subtraction circuits more complicated |

---
