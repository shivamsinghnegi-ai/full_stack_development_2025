# Stack Organization

## What is a Stack?
- **Definition**: A linear data structure that follows **LIFO (Last In First Out)** principle
- The **last element added** is the **first one to be removed**
- Stack is a useful feature of the CPU

---

## Stack Operations

| Operation | Name | Description |
|-----------|------|-------------|
| **PUSH** | Insertion | Add element to top of stack |
| **POP** | Deletion | Remove element from top of stack |

---

## Types of Stack Organization

### 1. Register Stack

**Definition**: A sequence of registers organized as a stack where data is added and removed from the top.

**Key Points**:
- Used for **temporary data storage** during program execution
- Contains a **Stack Pointer (SP)** - a register that holds the address of the topmost element
- Used for storing: functions, arguments, return addresses, and variables

**Example: 64-Word Register Stack**

```
┌─────────────┐
│   Reg 63    │ ← Top most register
├─────────────┤
│     ...     │
├─────────────┤
│   Reg 3     │
├─────────────┤
│   Reg 2     │
├─────────────┤
│   Reg 1     │
├─────────────┤
│   Reg 0     │
└─────────────┘
        ↑
       SP (Stack Pointer)
```

> **Working**: When a new value is PUSHED, it is placed in the register indicated by SP, and SP is incremented.

---

### 2. Memory Stack

**Definition**: A stack implemented in RAM connected to the CPU.

**Key Points**:
- Computer memory is divided into **3 segments**: Program, Data, Stack
- Uses three registers:
  - **PC (Program Counter)**: Points to next instruction address
  - **AR (Address Register)**: Points to data array
  - **SP (Stack Pointer)**: Points to stack top

**Memory Organization Diagram**:

```
          ┌─────────────┐
    PC ──→│     100     │  Program Segment
          ├─────────────┤
    AR ──→│     500     │  
          │    1000     │  Data Segment
          ├─────────────┤
          │    1999     │
          │    2000     │
    SP ──→│    2001     │  Stack Segment
          └─────────────┘
```

**Important**: 
- SP initially points to **2001** (beginning of stack)
- Stack **grows with decreasing addresses** (2001 → 2000 → 1999...)
- First element saved at **2000**, then **1999**, etc.

---

## Stack Limit Checking

Two processors check the register limit:
- One processor monitors **Upper Limit** (e.g., 100)
- Other processor monitors **Lower Limit** (e.g., 2001)

This prevents **stack overflow** and **stack underflow**.

---

## Quick Comparison Table

| Feature | Register Stack | Memory Stack |
|---------|---------------|--------------|
| **Location** | CPU Registers | RAM |
| **Speed** | Faster | Slower |
| **Size** | Limited (e.g., 64 words) | Larger |
| **Use** | Temporary storage | Subroutine calls, interrupts |

---
