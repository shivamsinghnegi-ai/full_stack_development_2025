# Design of Control Unit

### What is a Control Unit?
The **Control Unit (CU)** is the component of the CPU that **directs the operation** of the processor. It generates control signals that tell each hardware component what to do at each step.

> Control Unit does NOT process data. It only **coordinates** — tells ALU what operation to do, tells registers when to load, tells memory when to read/write.

---

### Functions of Control Unit

1. Fetch instructions from memory
2. Decode instructions
3. Generate control signals for datapath components
4. Manage instruction sequencing (PC update)
5. Handle interrupts and exceptions

---

### Types of Control Unit Design

### 1. Hardwired Control Unit

Control signals are generated by **fixed combinational logic circuits** (gates, flip-flops). The control logic is physically wired into the hardware.

```
         Instruction Register (IR)
                  |
         ┌────────┴────────┐
         │   Instruction   │
         │    Decoder      │
         └────────┬────────┘
                  |
         ┌────────┴────────┐
         │  State Counter  │
         │  (Timing logic) │
         └────────┬────────┘
                  |
     ┌────────────┴──────────────┐
     │   Combinational Logic     │
     │   (Control Signal Gen.)   │
     └────────────┬──────────────┘
                  |
          Control Signals →→→ to Datapath
```

**Steps in Hardwired Design:**
1. Define all machine instructions and their timing steps
2. Draw a state diagram for each instruction
3. Derive Boolean expressions for each control signal
4. Implement using logic gates

---

### 2. Micro-Programmed Control Unit

Control signals are generated by **reading microinstructions from control memory**.

```
         Instruction Register (IR)
                  |
         ┌────────┴────────┐
         │  Mapping ROM    │ → Starting address of microprogram
         └────────┬────────┘
                  |
         ┌────────┴────────┐
         │      CAR        │ → Points to current microinstruction
         └────────┬────────┘
                  |
         ┌────────┴────────┐
         │ Control Memory  │ → Stores all microprograms
         └────────┬────────┘
                  |
          Control Signals →→→ to Datapath
```

---

### Hardwired vs Micro-Programmed — Detailed Comparison

| Feature | Hardwired Control | Micro-Programmed Control |
|---------|------------------|--------------------------|
| Implementation | Combinational logic circuits | Control memory (ROM/RAM) |
| Speed | **Fast** (direct hardware) | **Slower** (memory access needed) |
| Flexibility | **Rigid** — hard to modify | **Flexible** — change memory contents |
| Complexity | Complex for large instruction sets | Easier to design and extend |
| Cost | Higher for complex ISA | Lower design cost |
| Modification | Requires hardware redesign | Just reprogram control memory |
| Used in | RISC processors | CISC processors (Intel x86) |
| Fault detection | Difficult | Easier |
| Size | Compact | Larger (due to control memory) |

> RISC = Hardwired. CISC = Micro-programmed. This single line is often worth 2 marks.

---

### Control Signals — What They Do

| Control Signal | Action |
|---------------|--------|
| LD (Load) | Load data into a register |
| EN (Enable) | Put register data onto the bus |
| RD (Read) | Read from memory |
| WR (Write) | Write to memory |
| INC | Increment register (usually PC) |
| ADD, SUB... | Tell ALU which operation to perform |
| CLR | Clear a register |

---

### Instruction Cycle and Control

Every instruction goes through these **phases**, each generating control signals:

```
┌─────────────┐
│ FETCH       │ → AR←PC, DR←M[AR], PC←PC+1, IR←DR
└──────┬──────┘
       ↓
┌─────────────┐
│ DECODE      │ → Examine IR opcode, determine operation type
└──────┬──────┘
       ↓
┌─────────────┐
│ EXECUTE     │ → Perform the actual operation (varies by instruction)
└──────┬──────┘
       ↓
┌─────────────┐
│ WRITE BACK  │ → Store result back to register or memory
└─────────────┘
```

> Each phase corresponds to one or more **micro-operations**, and each micro-operation requires specific control signals.

---
