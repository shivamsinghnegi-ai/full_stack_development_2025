# Bus and Memory Transfers

### What is a Bus?
A **bus** is a shared communication line (set of wires) through which multiple registers transfer data â€” but **only one transfer at a time**.

> **Why Bus?** Without a bus, connecting n registers to each other directly requires **nÃ—(nâˆ’1) lines** â€” very expensive. A bus reduces this to **n lines** shared by all.

---

### Common Bus System

**Setup:** Multiple registers share a single bus using **multiplexers (MUX)**

```
        S1  S0  (Selection Lines)
          â†“  â†“
    â”Œâ”€â”€â”€â”€â”€MUXâ”€â”€â”€â”€â”€â”€â”
    â”‚              â”‚
   [R1]  [R2]  [R3]  [R4]
              â†“
           BUS (n-bit)
              â†“
        Destination Register
```

| S1 | S0 | Selected Register |
|----|----|-------------------|
| 0  | 0  | R1 |
| 0  | 1  | R2 |
| 1  | 0  | R3 |
| 1  | 1  | R4 |

- Selection lines **S1, S0** choose which register drives the bus
- For **4 registers** of **n bits** each â†’ need **n 4Ã—1 MUXes**

---

### Three-State Bus Buffers

An alternative to MUX-based bus using **tri-state gates**.

**Three states of a tri-state buffer:**
| Control | Output |
|---------|--------|
| 1 | Normal output (0 or 1) |
| 0 | **High Impedance (Z)** â€” disconnected |

```
    A â”€â”€[tri-state buffer]â”€â”€ BUS
              â†‘
           Enable
```

- When Enable = 1 â†’ buffer is **active**, drives bus
- When Enable = 0 â†’ buffer is in **high-Z state**, disconnected
- Only **one buffer enabled at a time**

> ğŸ’¡ **Exam Tip:** Three-state buffers are preferred in modern systems because they are **simpler and faster** than MUX-based bus systems.

---

### Memory Transfers

Memory is treated as a large array of registers. Two special registers handle memory access:

| Register | Full Name | Purpose |
|----------|-----------|---------|
| **AR** | Address Register | Holds address of memory location |
| **DR** | Data Register | Holds data read from / written to memory |

---

#### Memory Read Operation
```
DR â† M[AR]
```
Steps:
1. Load address into AR
2. Send read signal to memory
3. Memory sends data â†’ stored in DR

---

#### Memory Write Operation
```
M[AR] â† DR
```
Steps:
1. Load address into AR
2. Load data to be written into DR
3. Send write signal to memory
4. Data from DR â†’ stored at M[AR]

---

### Transfer from Memory via Bus

**Read:**
```
AR â† (address)
DR â† M[AR]    â†’ data placed on bus
R1 â† DR       â†’ destination register loads from bus
```

**Write:**
```
AR â† (address)
M[AR] â† R1    â†’ data from R1 written to memory
```

---
