# Bus and Memory Transfers

### What is a Bus?
A **bus** is a shared communication line (set of wires) through which multiple registers transfer data — but **only one transfer at a time**.

> **Why Bus?** Without a bus, connecting n registers to each other directly requires **n×(n−1) lines** — very expensive. A bus reduces this to **n lines** shared by all.

---

### Common Bus System

**Setup:** Multiple registers share a single bus using **multiplexers (MUX)**

```
        S1  S0  (Selection Lines)
          ↓  ↓
    ┌─────MUX──────┐
    │              │
   [R1]  [R2]  [R3]  [R4]
              ↓
           BUS (n-bit)
              ↓
        Destination Register
```

| S1 | S0 | Selected Register |
|----|----|-------------------|
| 0  | 0  | R1 |
| 0  | 1  | R2 |
| 1  | 0  | R3 |
| 1  | 1  | R4 |

- Selection lines **S1, S0** choose which register drives the bus
- For **4 registers** of **n bits** each → need **n 4×1 MUXes**

---

### Three-State Bus Buffers

An alternative to MUX-based bus using **tri-state gates**.

**Three states of a tri-state buffer:**
| Control | Output |
|---------|--------|
| 1 | Normal output (0 or 1) |
| 0 | **High Impedance (Z)** — disconnected |

```
    A ──[tri-state buffer]── BUS
              ↑
           Enable
```

- When Enable = 1 → buffer is **active**, drives bus
- When Enable = 0 → buffer is in **high-Z state**, disconnected
- Only **one buffer enabled at a time**

> **Exam Tip:** Three-state buffers are preferred in modern systems because they are **simpler and faster** than MUX-based bus systems.

---

### Memory Transfers

Memory is treated as a large array of registers. Two special registers handle memory access:

| Register | Full Name | Purpose |
|----------|-----------|---------|
| **AR** | Address Register | Holds address of memory location |
| **DR** | Data Register | Holds data read from / written to memory |

---

#### Memory Read Operation
```
DR ← M[AR]
```
Steps:
1. Load address into AR
2. Send read signal to memory
3. Memory sends data → stored in DR

---

#### Memory Write Operation
```
M[AR] ← DR
```
Steps:
1. Load address into AR
2. Load data to be written into DR
3. Send write signal to memory
4. Data from DR → stored at M[AR]

---

### Transfer from Memory via Bus

**Read:**
```
AR ← (address)
DR ← M[AR]    → data placed on bus
R1 ← DR       → destination register loads from bus
```

**Write:**
```
AR ← (address)
M[AR] ← R1    → data from R1 written to memory
```

---
